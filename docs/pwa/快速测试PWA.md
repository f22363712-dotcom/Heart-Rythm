# 快速测试 PWA 功能

## 🎯 测试目标

验证 PWA 在不同设备和浏览器上的安装和运行情况。

---

## ✅ 测试清单

### 1️⃣ 电脑端测试（Chrome）

#### 步骤：
1. [ ] 运行 `start_pwa.bat` 启动服务
2. [ ] 打开 Chrome 浏览器
3. [ ] 访问 `http://127.0.0.1:5000`
4. [ ] 检查页面是否正常显示
5. [ ] 等待页面底部弹出安装提示（约 3-5 秒）
6. [ ] 点击"立即安装"按钮
7. [ ] 检查桌面是否出现"心动积分"图标
8. [ ] 双击图标打开 PWA 应用
9. [ ] 检查是否以独立窗口打开（无浏览器地址栏）
10. [ ] 测试登录功能（使用测试账号）
11. [ ] 测试基本功能（查看积分、添加记录等）

#### 预期结果：
- ✅ 页面正常显示，样式美观
- ✅ 安装提示正常弹出
- ✅ 安装成功，桌面有图标
- ✅ 独立窗口打开，无浏览器 UI
- ✅ 所有功能正常工作

---

### 2️⃣ 电脑端测试（Edge）

#### 步骤：
1. [ ] 打开 Edge 浏览器
2. [ ] 访问 `http://127.0.0.1:5000`
3. [ ] 检查地址栏右侧是否有 **⊕ 应用可用** 图标
4. [ ] 点击图标，选择"安装"
5. [ ] 检查开始菜单是否出现"心动积分"
6. [ ] 从开始菜单打开应用
7. [ ] 测试基本功能

#### 预期结果：
- ✅ 安装图标正常显示
- ✅ 安装成功
- ✅ 应用正常运行

---

### 3️⃣ 手机端测试（Android + Chrome）

#### 前提条件：
- 手机和电脑连接同一 WiFi
- 电脑 IP 地址：`192.168.10.17`（根据实际情况调整）

#### 步骤：
1. [ ] 确认电脑服务正在运行
2. [ ] 在电脑上运行 `ipconfig` 确认 IP 地址
3. [ ] 打开手机 Chrome 浏览器
4. [ ] 访问 `http://192.168.10.17:5000`
5. [ ] 检查页面是否正常显示（移动端适配）
6. [ ] 点击右上角 **⋮** 菜单
7. [ ] 选择"添加到主屏幕"或"安装应用"
8. [ ] 点击"添加"
9. [ ] 检查主屏幕是否出现"心动积分"图标
10. [ ] 点击图标打开应用
11. [ ] 检查是否全屏显示（无浏览器 UI）
12. [ ] 测试登录和基本功能
13. [ ] 测试触摸交互（按钮点击、滚动等）
14. [ ] 测试横屏和竖屏切换

#### 预期结果：
- ✅ 页面在手机上显示正常
- ✅ 移动端样式适配良好
- ✅ 安装成功
- ✅ 全屏显示，体验流畅
- ✅ 触摸交互正常
- ✅ 横竖屏切换正常

---

### 4️⃣ 手机端测试（iPhone + Safari）

#### 步骤：
1. [ ] 打开 Safari 浏览器
2. [ ] 访问 `http://192.168.10.17:5000`
3. [ ] 检查页面显示
4. [ ] 点击底部 **分享按钮**（方框带向上箭头）
5. [ ] 向下滚动，找到"添加到主屏幕"
6. [ ] 点击"添加"
7. [ ] 检查主屏幕图标
8. [ ] 打开应用测试功能

#### 预期结果：
- ✅ Safari 正常显示
- ✅ 安装成功
- ✅ 应用正常运行

---

### 5️⃣ 离线功能测试

#### 步骤：
1. [ ] 在已安装 PWA 的设备上打开应用
2. [ ] 确保应用正常运行
3. [ ] 关闭电脑上的服务（关闭命令行窗口）
4. [ ] 刷新 PWA 应用
5. [ ] 检查首页是否仍能显示（缓存的静态资源）
6. [ ] 尝试登录（应该失败，显示网络错误）
7. [ ] 重新启动电脑服务
8. [ ] 刷新应用，检查是否恢复正常

#### 预期结果：
- ✅ 静态页面可以离线访问
- ✅ API 请求失败时有友好的错误提示
- ✅ 服务恢复后应用正常工作

---

### 6️⃣ Service Worker 测试

#### 步骤：
1. [ ] 在浏览器中打开 `http://127.0.0.1:5000`
2. [ ] 按 F12 打开开发者工具
3. [ ] 切换到"Application"（应用）标签
4. [ ] 左侧选择"Service Workers"
5. [ ] 检查是否有注册的 Service Worker
6. [ ] 查看状态是否为"activated and is running"
7. [ ] 切换到"Cache Storage"（缓存存储）
8. [ ] 检查是否有缓存的资源

#### 预期结果：
- ✅ Service Worker 注册成功
- ✅ 状态为激活并运行
- ✅ 缓存中有静态资源

---

### 7️⃣ Manifest 测试

#### 步骤：
1. [ ] 在开发者工具的"Application"标签
2. [ ] 左侧选择"Manifest"
3. [ ] 检查 manifest.json 是否正确加载
4. [ ] 检查应用名称、图标、主题色等信息

#### 预期结果：
- ✅ Manifest 加载成功
- ✅ 应用名称：心动积分 - 爱的印记本
- ✅ 图标显示正常
- ✅ 主题色：#e891a9

---

### 8️⃣ 响应式设计测试

#### 步骤：
1. [ ] 在浏览器中打开应用
2. [ ] 按 F12 打开开发者工具
3. [ ] 点击"Toggle device toolbar"（切换设备工具栏）
4. [ ] 测试不同设备尺寸：
   - [ ] iPhone SE (375x667)
   - [ ] iPhone 12 Pro (390x844)
   - [ ] iPad (768x1024)
   - [ ] Galaxy S20 (360x800)
5. [ ] 检查布局是否适配
6. [ ] 检查字体大小是否合适
7. [ ] 检查按钮是否易于点击

#### 预期结果：
- ✅ 所有设备尺寸显示正常
- ✅ 布局自适应
- ✅ 触摸目标足够大

---

## 🐛 常见问题排查

### 问题 1：安装提示不出现

**可能原因：**
- 浏览器不支持 PWA
- 已经安装过
- Service Worker 注册失败

**解决方法：**
1. 检查浏览器版本（Chrome 70+, Edge 79+）
2. 清除浏览器缓存和 Service Worker
3. 检查控制台是否有错误

### 问题 2：手机无法访问

**可能原因：**
- 不在同一 WiFi
- 防火墙阻止
- IP 地址错误

**解决方法：**
1. 确认 WiFi 连接
2. 关闭 Windows 防火墙测试
3. 重新获取 IP 地址

### 问题 3：样式显示异常

**可能原因：**
- CDN 资源加载失败
- 缓存问题

**解决方法：**
1. 检查网络连接
2. 清除浏览器缓存
3. 强制刷新（Ctrl+F5）

---

## 📊 测试报告模板

### 测试环境
- 测试日期：____________________
- 电脑系统：____________________
- 手机型号：____________________
- 浏览器版本：__________________

### 测试结果

| 测试项 | 通过 | 失败 | 备注 |
|--------|------|------|------|
| Chrome 安装 | ☐ | ☐ | |
| Edge 安装 | ☐ | ☐ | |
| Android 安装 | ☐ | ☐ | |
| iPhone 安装 | ☐ | ☐ | |
| 离线功能 | ☐ | ☐ | |
| Service Worker | ☐ | ☐ | |
| 响应式设计 | ☐ | ☐ | |

### 发现的问题
1. ___________________________________
2. ___________________________________
3. ___________________________________

### 改进建议
1. ___________________________________
2. ___________________________________
3. ___________________________________

---

## 🎉 测试完成

如果所有测试项都通过，恭喜你！PWA 功能已经完美实现！

现在可以：
- ✅ 在电脑和手机上安装使用
- ✅ 享受类原生应用的体验
- ✅ 随时记录美好时光

---

**测试版本：** v2.1
**测试日期：** 2025-01-23
